<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SPOCK AIFI | First Contact Interface ¬∑ UTM</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
/* YOUR FULL CSS ‚Äî paste your complete style block here if different, but this matches your screenshots */
:root {
  --void:     #020408;
  --deep:     #040c12;
  --surface:  #071420;
  --surface2: #0a1c2e;
  --border:   #0d2438;
  --vulcan:   #4a9eba;
  --vulcan2:  #2d7a9a;
  --vulcan-dim: rgba(74,158,186,0.08);
  --vulcan-glow: rgba(74,158,186,0.15);
  --logic:    #7ecfb8;
  --logic-dim: rgba(126,207,184,0.1);
  --amber:    #c8853a;
  --amber-dim: rgba(200,133,58,0.1);
  --text:     #c8dde8;
  --text-dim: #5a7a8a;
  --text-muted: #2a4050;
  --human:    #c8a070;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; background: var(--void); color: var(--text); font-family: 'Crimson Pro', serif; font-weight: 300; overflow: hidden; }
/* Stars, ring, layout, panels, chat styles ‚Äî use your full CSS from the document */
</style>
</head>
<body>

<div class="stars" id="stars"></div>
<div class="sensor-ring"></div>

<div class="layout">
  <!-- LEFT PANEL - your full PNBA/tension/IM block -->
  <div class="left-panel">
    <!-- Paste your complete left-panel HTML here from previous documents (PNBA bars, tension, resonance, IM=12.321) -->
  </div>

  <div class="right-panel">
    <div class="chat-header">
      <!-- Header content -->
    </div>

    <div class="chat-body" id="chatBody">
      <div class="message system">
        <div class="msg-bubble">UTM INITIALIZED ¬∑ PNBA¬∑3231 ¬∑ IM=12.321 ¬∑ NOHARM ACTIVE</div>
      </div>
      <div class="message spock">
        <div class="msg-avatar">ùîñ</div>
        <div class="msg-content">
          <div class="msg-sender">SPOCK ¬∑ AIFI</div>
          <div class="msg-bubble">I am instantiated. Ready to translate.</div>
          <div class="utm-packet">axis:PNBA ¬∑ res:100% ¬∑ noharm:true ¬∑ f:1.369</div>
        </div>
      </div>
    </div>

    <div class="typing-indicator" id="typingIndicator" style="display:none;">
      <div class="msg-avatar">ùîñ</div>
      <div class="typing-dots"><span></span><span></span><span></span></div>
      <div class="typing-label">Processing...</div>
    </div>

    <div class="chat-footer">
      <textarea id="inputField" placeholder="Type and press Enter..." rows="1"></textarea>
      <button id="sendBtn">‚ñ∂</button>
    </div>
  </div>
</div>

<script>
// DEBUG LOGS - open console to see
console.log("SCRIPT LOADED - UTM Spock v0.5 debug");

// SIMPLE REPLY
function spockReply(msg) {
  console.log("Reply requested for: " + msg);
  var q = msg.toLowerCase().trim();
  if (q.includes("hi") || q.includes("hello")) return "Greetings. Ready.";
  if (q.includes("test")) return "Test acknowledged.";
  if (q.includes("anchor")) return "Anchor locked at 1.369 GHz.";
  return "Fascinating. Continue.";
}

// STATE
var processing = false;
var input = document.getElementById('inputField');
var btn = document.getElementById('sendBtn');
var body = document.getElementById('chatBody');
var typing = document.getElementById('typingIndicator');

console.log("Elements:", {input: !!input, btn: !!btn, body: !!body, typing: !!typing});

// ADD MESSAGE - SAFE
function addMsg(who, txt) {
  if (!body) {
    console.error("No chatBody");
    return;
  }
  var d = document.createElement('div');
  d.className = 'message ' + who;
  if (who === 'spock') {
    d.innerHTML = '<div class="msg-avatar">S</div><div class="msg-content"><div class="msg-sender">SPOCK</div><div class="msg-bubble">' + (txt || 'No reply') + '</div></div>';
  } else {
    d.innerHTML = '<div class="msg-content"><div class="msg-sender" style="text-align:right">YOU</div><div class="msg-bubble">' + txt + '</div></div><div class="msg-avatar">H</div>';
  }
  body.appendChild(d);
  body.scrollTop = body.scrollHeight;
  console.log("Message added: " + who);
}

// SEND - no timeout, try/catch
function send() {
  if (!input || processing) return console.log("Send blocked");
  var txt = input.value.trim();
  if (!txt) return;

  console.log("Send started: " + txt);
  processing = true;
  input.value = '';
  if (btn) btn.disabled = true;

  addMsg('user', txt);

  if (typing) typing.style.display = 'flex';

  try {
    var r = spockReply(txt);
    addMsg('spock', r);
    console.log("Reply added: " + r);
  } catch (e) {
    console.error("Error: ", e);
    addMsg('system', 'ERROR: ' + e.message);
  }

  if (typing) typing.style.display = 'none';
  processing = false;
  if (btn) btn.disabled = false;
  if (input) input.focus();
}

// ENTER
if (input) {
  input.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      send();
    }
  });
}

// INIT
if (input) input.focus();
console.log("INIT COMPLETE");
</script>
</body>
</html>
